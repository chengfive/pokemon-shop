{"version":3,"sources":["webpack:///./src/views/ProductDetail.vue","webpack:///./src/views/ProductDetail.vue?9de9"],"names":["class","color","size","style","id","products","length","src","product","type","name","price","description","currentQuantity","decreaseQuantity","maxQuantity","emptyQuantity","quantity","increaseQuantity","maxNotice","subTotal","addToCart","data","computed","this","find","item","$route","params","cartData","methods","isLogining","store","commit","a","patch","user","cart","div","document","createElement","text","createTextNode","appendChild","getElementById","setTimeout","removeChild","$router","push","replace","render"],"mappings":"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","file":"js/chunk-2d0d3e0a.445a2060.js","sourcesContent":["<template>\n  <div v-show=\"!products.length\" class=\"loading-icon\"></div>\n  <div class=\"product-detail\" v-if=\"products.length\">\n    <div class=\"product-img\">\n      <img :src=\"require('@/assets/products/' + product.src)\" />\n    </div>\n    <div class=\"product-other\">\n      <span class=\"product-type\">{{ product.type }}</span>\n      <div class=\"product-name\">{{ product.name }}</div>\n      <div class=\"product-price\">${{ product.price }}</div>\n      <div class=\"product-description\">{{ product.description }}</div>\n      <hr color=\"#999999\" size=\"0.5\" style=\"margin: 30px 0\" />\n      <div class=\"product-quantity\">\n        <button\n          :class=\"{ disable: currentQuantity == 1 }\"\n          @click=\"decreaseQuantity\"\n        >\n          &minus;\n        </button>\n        <input\n          type=\"text\"\n          @input=\"maxQuantity\"\n          @blur=\"emptyQuantity\"\n          v-model=\"currentQuantity\"\n        />\n        <button\n          :class=\"{ disable: currentQuantity == product.quantity }\"\n          @click=\"increaseQuantity\"\n        >\n          &plus;\n        </button>\n        <span style=\"margin-left: 15px; color: #666666\"\n          >還剩下{{ product.quantity }}件</span\n        >\n      </div>\n      <div style=\"height: 20px; margin: -10px 0 0\">\n        <span v-if=\"maxNotice\" style=\"color: #ff0000\">已達到購買上限</span>\n      </div>\n      <div class=\"product-subTotal\">\n        小計<span>${{ subTotal }}</span>\n      </div>\n      <div class=\"product-cart\">\n        <button @click=\"addToCart\">加入購物車</button>\n      </div>\n    </div>\n    <div id=\"pop\"></div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport axios from \"axios\";\nimport store from \"@/store/index.js\";\n\nexport default {\n  data() {\n    return {\n      currentQuantity: 1,\n    };\n  },\n  computed: {\n    ...mapState([\"products\", \"isLogining\", \"user\"]),\n    product() {\n      return this.products.find((item) => item.id === this.$route.params.id);\n    },\n    subTotal() {\n      return this.product.price * this.currentQuantity;\n    },\n    cartData() {\n      return {\n        id: this.product.id,\n        name: this.product.name,\n        price: this.product.price,\n        src: this.product.src,\n        quantity: this.currentQuantity,\n        subTotal: this.subTotal,\n      };\n    },\n    maxNotice() {\n      if (this.currentQuantity < this.product.quantity) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n  },\n  methods: {\n    addToCart() {\n      if (this.isLogining) {\n        store.commit(\"pushCart\", this.cartData);\n        axios.patch(\n          \"https://pokemon-shop-server.herokuapp.com/users/\" + this.user.id,\n          {\n            cart: this.user.cart,\n          }\n        );\n        store.commit(\"addCart\", this.user.cart);\n        const div = document.createElement(\"div\");\n        const text = document.createTextNode(\"商品已加入購物車\");\n        div.appendChild(text);\n        document.getElementById(\"pop\").appendChild(div);\n        setTimeout(() => {\n          document.getElementById(\"pop\").removeChild(div);\n        }, 1000);\n      } else {\n        this.$router.push(\"/login\");\n      }\n    },\n    increaseQuantity() {\n      if (this.currentQuantity < this.product.quantity) {\n        this.currentQuantity++;\n      }\n    },\n    decreaseQuantity() {\n      if (this.currentQuantity > 1) {\n        this.currentQuantity--;\n      }\n    },\n    maxQuantity() {\n      this.currentQuantity = this.currentQuantity.replace(/^0|\\D/g, \"\");\n      if (this.currentQuantity > this.product.quantity) {\n        this.currentQuantity = this.product.quantity;\n      }\n      if (this.currentQuantity !== \"\") {\n        this.currentQuantity = +this.currentQuantity;\n      }\n    },\n    emptyQuantity() {\n      if (this.currentQuantity === \"\") {\n        this.currentQuantity = 1;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\"></style>\n","import { render } from \"./ProductDetail.vue?vue&type=template&id=0317935b\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}